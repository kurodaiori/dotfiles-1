set editor = 'vim "+set fdm=syntax"'

# vi mapping
bind index gg first-entry
bind index G last-entry
bind index \CF next-page
bind index \CB previous-page
bind index \CL sync-mailbox
bind index ? search-opposite
bind index \e? help

# gmail(imap)
set imap_user = "shin@kojima.org"
set imap_pass = `security find-internet-password -g -a shin@kojima.org -s imap.gmail.com 2>&1 | sed -n -E 's/^password: "([^"]*)"/\1/p'`
set smtp_url = "smtp://shin@kojima.org@smtp.gmail.com:587/"
set smtp_pass = `security find-internet-password -g -a shin@kojima.org -s smtp.gmail.com 2>&1 | sed -n -E 's/^password: "([^"]*)"/\1/p'`
set from = "shin@kojima.org"
set realname = "Kojima Shin"

set folder = "imaps://imap.gmail.com:993"
set spoolfile = "+INBOX"
set postponed = "+[Gmail]/Drafts"

set header_cache=~/.mutt/cache/headers
set message_cachedir=~/.mutt/cache/bodies
set certificate_file=~/.mutt/cache/certificates

set move = no

set sort = threads
set sort_aux = 'reverse-last-date-received'

set timeout = 3
set mail_check = 900

set imap_keepalive = 300
set imap_idle
set imap_check_subscribed
unset imap_passive
unset imap_peek

set reverse_name

set forward_format="Fwd: %s"
set fcc_attach
set include
set edit_headers = yes
set signature = "echo $'\
Kojima Shin\\n\
+818041717536'|"

ignore *
unignore subject from to cc date
unhdr_order *
hdr_order subject from to cc date

color hdrdefault brightblack white
color header black white ^(From|Subject):
color search black yellow
color normal white black
color message white black
color body cyan black '[a-zA-Z0-9._%+-]+@([a-zA-Z0-9.-]+\.)+[a-zA-Z]{2,4}'
color body cyan black '(https?|ftp)://([a-zA-Z0-9.-]+\.)+[a-zA-Z]{2,4}[a-zA-Z0-9./~%&?=+_-]*'
color quoted brightblack black
color signature brightgreen black
color attachment black green
color tree brightred black
color indicator black cyan
color status blue white
color tilde blue black
color error white red

color quoted blue black
color quoted1 brightblue black
color quoted2 blue black
color quoted3 brightblue black
color quoted4 blue black
color quoted5 brightblue black
color quoted6 blue black
color quoted7 brightblue black

# unread msg
color index brightwhite black "(~N|~O) !~F !~T"
# flagged msg
color index white magenta "~F !~T"
# tagged msg
color index white blue "~T"
# deleted msg
color index red black "~D"

set pager_index_lines = 6

bind index G imap-fetch-mail

auto_view text/html

set query_command = "contacts -Sf '%e'$'\t''%n' '%s'"
bind editor <Tab> complete-query

set pager_stop

macro pager \Cu "|urlview<enter>"
